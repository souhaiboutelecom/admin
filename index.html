<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOUHAIBOU TÉLÉCOM - Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #1428A0;
            --secondary: #FF6B00;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --white: #ffffff;
            --sidebar-width: 250px;
            --header-height: 60px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fb;
            color: #333;
            overflow-x: hidden;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--primary);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h2 {
            font-size: 1.2rem;
            margin-top: 10px;
        }

        .sidebar-menu {
            padding: 15px 0;
        }

        .menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .menu-item.active {
            background: rgba(255, 255, 255, 0.2);
            border-left: 4px solid var(--secondary);
        }

        .menu-item i {
            margin-right: 10px;
            font-size: 18px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 20px;
            transition: all 0.3s ease;
        }

        /* Header */
        .header {
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .notification-badge {
            position: relative;
            cursor: pointer;
        }

        .notification-badge i {
            font-size: 1.2rem;
            color: var(--gray);
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1rem;
            color: var(--gray);
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .card-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .card-footer {
            margin-top: 15px;
            font-size: 0.85rem;
            color: var(--gray);
        }

        /* Charts */
        .charts-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .chart-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        /* Tables */
        .table-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background-color: var(--light);
            font-weight: 600;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        /* Buttons */
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 0.8rem;
        }

        /* Forms */
        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            display: none;
        }

        .modal {
            background: white;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Login Screen */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, #1a3ac5 100%);
            padding: 20px;
        }

        .login-card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .login-logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-logo h1 {
            color: var(--primary);
            font-size: 1.8rem;
            margin-top: 10px;
        }

        /* Utilities */
        .text-center {
            text-align: center;
        }

        .text-success {
            color: var(--success);
        }

        .text-danger {
            color: var(--danger);
        }

        .text-warning {
            color: var(--warning);
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .hidden {
            display: none;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                width: 70px;
                overflow: visible;
            }

            .sidebar-header h2, .menu-item span {
                display: none;
            }

            .menu-item {
                justify-content: center;
                padding: 15px;
            }

            .menu-item i {
                margin-right: 0;
            }

            .main-content {
                margin-left: 70px;
            }

            .charts-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
            }

            .header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .header-actions {
                width: 100%;
                justify-content: space-between;
            }
        }

        /* Page specific styles */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .filter-bar {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
        }

        .filter-select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-image {
            height: 180px;
            background-color: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .product-price {
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 10px;
        }

        .product-stock {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stock-badge {
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .stock-low {
            background: #fff0f0;
            color: var(--danger);
        }

        .stock-medium {
            background: #fff9eb;
            color: var(--warning);
        }

        .stock-high {
            background: #f0f9f0;
            color: var(--success);
        }

        .order-actions {
            display: flex;
            gap: 10px;
        }

        .search-container {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            padding-left: 45px;
            border: 1px solid #ddd;
            border-radius: 30px;
            font-size: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="login-page" class="login-container">
        <div class="login-card">
            <div class="login-logo">
                <i class="fas fa-store" style="font-size: 3rem; color: var(--primary);"></i>
                <h1>SOUHAIBOU TÉLÉCOM</h1>
                <p>Espace Administrateur</p>
            </div>
            <div class="form-group">
                <label class="form-label">Mot de passe</label>
                <input type="password" id="login-password" class="form-control" placeholder="Entrez le mot de passe">
            </div>
            <button id="login-btn" class="btn btn-primary" style="width: 100%;">Se connecter</button>
            <p id="login-error" class="text-danger" style="margin-top: 15px; display: none;">Mot de passe incorrect</p>
        </div>
    </div>

    <!-- Main App -->
    <div id="app-container" class="app-container hidden">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-store" style="font-size: 2rem;"></i>
                <h2>SOUHAIBOU TÉLÉCOM</h2>
            </div>
            <div class="sidebar-menu">
                <div class="menu-item active" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Tableau de bord</span>
                </div>
                <div class="menu-item" data-page="orders">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Commandes</span>
                </div>
                <div class="menu-item" data-page="products">
                    <i class="fas fa-box"></i>
                    <span>Produits</span>
                </div>
                <div class="menu-item" data-page="stats">
                    <i class="fas fa-chart-line"></i>
                    <span>Statistiques</span>
                </div>
                <div class="menu-item" data-page="security">
                    <i class="fas fa-lock"></i>
                    <span>Sécurité</span>
                </div>
                <div class="menu-item" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Déconnexion</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-title" id="page-title">Tableau de bord</div>
                <div class="header-actions">
                    <div class="notification-badge">
                        <i class="fas fa-bell"></i>
                        <span class="badge" id="notification-count">0</span>
                    </div>
                    <div class="user-profile">
                        <div class="user-avatar">A</div>
                        <div>Admin</div>
                    </div>
                </div>
            </div>

            <!-- Pages -->
            <div id="dashboard-page" class="page active">
                <div class="dashboard-cards">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Commandes aujourd'hui</div>
                            <div class="card-icon" style="background: rgba(20, 40, 160, 0.1); color: var(--primary);">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                        </div>
                        <div class="card-value" id="today-orders">0</div>
                        <div class="card-footer">+0% depuis hier</div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Revenu aujourd'hui</div>
                            <div class="card-icon" style="background: rgba(40, 167, 69, 0.1); color: var(--success);">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                        </div>
                        <div class="card-value" id="today-revenue">0 FCFA</div>
                        <div class="card-footer">+0% depuis hier</div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Commandes en attente</div>
                            <div class="card-icon" style="background: rgba(255, 193, 7, 0.1); color: var(--warning);">
                                <i class="fas fa-clock"></i>
                            </div>
                        </div>
                        <div class="card-value" id="pending-orders">0</div>
                        <div class="card-footer">En attente de validation</div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Produits en stock bas</div>
                            <div class="card-icon" style="background: rgba(220, 53, 69, 0.1); color: var(--danger);">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                        </div>
                        <div class="card-value" id="low-stock">0</div>
                        <div class="card-footer">Nécessitent réapprovisionnement</div>
                    </div>
                </div>

                <div class="charts-container">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Ventes des 7 derniers jours</h3>
                            <select class="filter-select">
                                <option>7 jours</option>
                                <option>30 jours</option>
                                <option>90 jours</option>
                            </select>
                        </div>
                        <canvas id="sales-chart" height="300"></canvas>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Catégories populaires</h3>
                        </div>
                        <canvas id="categories-chart" height="300"></canvas>
                    </div>
                </div>

                <div class="table-container">
                    <h3 class="mb-20">Dernières commandes</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>N° Commande</th>
                                <th>Client</th>
                                <th>Date</th>
                                <th>Montant</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="recent-orders">
                            <tr>
                                <td colspan="6" class="text-center">Aucune commande récente</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="orders-page" class="page">
                <div class="filter-bar">
                    <select id="order-status-filter" class="filter-select">
                        <option value="all">Toutes les commandes</option>
                        <option value="pending">En attente</option>
                        <option value="completed">Validées</option>
                        <option value="rejected">Rejetées</option>
                    </select>
                    <input type="date" id="order-date-filter" class="filter-select">
                    <div class="search-container" style="flex: 1;">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="order-search" class="search-input" placeholder="Rechercher une commande...">
                    </div>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>N° Commande</th>
                                <th>Client</th>
                                <th>Téléphone</th>
                                <th>Date</th>
                                <th>Montant</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="orders-table">
                            <tr>
                                <td colspan="7" class="text-center">Aucune commande</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="products-page" class="page">
                <div class="filter-bar">
                    <select id="product-category-filter" class="filter-select">
                        <option value="all">Toutes les catégories</option>
                        <option value="iphone">iPhone</option>
                        <option value="samsung">Samsung</option>
                        <option value="tecno">Tecno</option>
                        <option value="ecouteur">Écouteur</option>
                        <option value="chargeur">Chargeur</option>
                    </select>
                    <select id="product-stock-filter" class="filter-select">
                        <option value="all">Tous les stocks</option>
                        <option value="low">Stock bas</option>
                        <option value="medium">Stock moyen</option>
                        <option value="high">Stock élevé</option>
                    </select>
                    <div class="search-container" style="flex: 1;">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="product-search" class="search-input" placeholder="Rechercher un produit...">
                    </div>
                    <button class="btn btn-primary" id="add-product-btn">Ajouter un produit</button>
                </div>

                <div class="product-grid" id="products-grid">
                    <div class="text-center">Chargement des produits...</div>
                </div>
            </div>

            <div id="stats-page" class="page">
                <div class="filter-bar">
                    <select id="stats-period" class="filter-select">
                        <option value="day">Aujourd'hui</option>
                        <option value="week">Cette semaine</option>
                        <option value="month">Ce mois</option>
                        <option value="year">Cette année</option>
                    </select>
                    <input type="date" id="stats-start-date" class="filter-select">
                    <input type="date" id="stats-end-date" class="filter-select">
                    <button class="btn btn-primary">Appliquer</button>
                </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">Commandes</div>
                        <div class="stat-value" id="stats-orders">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Revenu</div>
                        <div class="stat-value" id="stats-revenue">0 FCFA</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Produits vendus</div>
                        <div class="stat-value" id="stats-products-sold">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Panier moyen</div>
                        <div class="stat-value" id="stats-avg-cart">0 FCFA</div>
                        <div class="stat-label">Moyenne</div>
                    </div>
                </div>

                <div class="charts-container">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Évolution des ventes</h3>
                        </div>
                        <canvas id="stats-sales-chart" height="300"></canvas>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Top produits</h3>
                        </div>
                        <canvas id="stats-products-chart" height="300"></canvas>
                    </div>
                </div>

                <div class="table-container">
                    <h3 class="mb-20">Détails des ventes</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Produit</th>
                                <th>Quantité vendue</th>
                                <th>Revenu</th>
                                <th>Stock restant</th>
                            </tr>
                        </thead>
                        <tbody id="sales-details">
                            <tr>
                                <td colspan="4" class="text-center">Aucune donnée</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="security-page" class="page">
                <div class="card">
                    <div class="card-header">
                        <h3>Paramètres de sécurité</h3>
                    </div>
                    <div class="card-body" style="padding: 20px;">
                        <div class="form-group">
                            <label class="form-label">Mot de passe administrateur</label>
                            <input type="password" id="admin-password" class="form-control" value="0000">
                            <small>Le mot de passe pour accéder à l'interface d'administration</small>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Code de suppression</label>
                            <input type="password" id="delete-code" class="form-control" value="0000">
                            <small>Le code requis pour supprimer des éléments</small>
                        </div>
                        <button class="btn btn-primary" id="save-security">Enregistrer les paramètres</button>
                    </div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <div class="card-header">
                        <h3>Journal d'activité</h3>
                    </div>
                    <div class="card-body" style="padding: 20px;">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Utilisateur</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="activity-log">
                                <tr>
                                    <td colspan="3" class="text-center">Aucune activité récente</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="order-detail-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Détails de la commande</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="order-detail-content">
                Chargement...
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" id="validate-order-btn">Valider</button>
                <button class="btn btn-danger" id="reject-order-btn">Rejeter</button>
                <button class="btn btn-primary" id="close-order-btn">Fermer</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="product-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Ajouter un produit</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nom du produit</label>
                    <input type="text" class="form-control" id="product-name">
                </div>
                <div class="form-group">
                    <label class="form-label">Catégorie</label>
                    <select class="form-control" id="product-category">
                        <option value="iphone">iPhone</option>
                        <option value="samsung">Samsung</option>
                        <option value="tecno">Tecno</option>
                        <option value="ecouteur">Écouteur</option>
                        <option value="chargeur">Chargeur</option>
                        <option value="powerbank">Power Bank</option>
                        <option value="tablette">Tablette</option>
                        <option value="ordinateur">Ordinateur</option>
                        <option value="box">Box</option>
                        <option value="smartwatch">Smart Watch</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Prix normal (FCFA)</label>
                    <input type="number" class="form-control" id="product-normal-price">
                </div>
                <div class="form-group">
                    <label class="form-label">Prix promo (FCFA)</label>
                    <input type="number" class="form-control" id="product-sale-price">
                </div>
                <div class="form-group">
                    <label class="form-label">Stock initial</label>
                    <input type="number" class="form-control" id="product-stock">
                </div>
                <div class="form-group">
                    <label class="form-label">Images (URLs séparées par des virgules)</label>
                    <textarea class="form-control" id="product-images" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-control" id="product-description" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="save-product-btn">Enregistrer</button>
                <button class="btn btn-secondary" id="cancel-product-btn">Annuler</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="delete-confirm-modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Confirmation de suppression</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>Êtes-vous sûr de vouloir supprimer cet élément ?</p>
                <div class="form-group">
                    <label class="form-label">Code de suppression</label>
                    <input type="password" class="form-control" id="delete-confirm-code">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" id="confirm-delete-btn">Supprimer</button>
                <button class="btn btn-secondary" id="cancel-delete-btn">Annuler</button>
            </div>
        </div>
    </div>

    <script>
        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDfJwZNAtT5u9sKdw7R2J7QOcohf2_03Vk",
            authDomain: "souhaibou-4883d.firebaseapp.com",
            projectId: "souhaibou-4883d",
            storageBucket: "souhaibou-4883d.firebasestorage.app",
            messagingSenderId: "703566382245",
            appId: "1:703566382245:web:82e265798635786bb8794c",
            measurementId: "G-SW6XGD9YHY"
        };

        // Initialisation Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Variables globales
        let adminPassword = "0000";
        let deleteCode = "0000";
        let currentUser = null;
        let orders = [];
        let products = [];
        let notifications = [];

        // Éléments DOM
        const elements = {
            loginPage: document.getElementById('login-page'),
            appContainer: document.getElementById('app-container'),
            loginPassword: document.getElementById('login-password'),
            loginBtn: document.getElementById('login-btn'),
            loginError: document.getElementById('login-error'),
            pageTitle: document.getElementById('page-title'),
            pages: document.querySelectorAll('.page'),
            menuItems: document.querySelectorAll('.menu-item'),
            notificationCount: document.getElementById('notification-count'),
            todayOrders: document.getElementById('today-orders'),
            todayRevenue: document.getElementById('today-revenue'),
            pendingOrders: document.getElementById('pending-orders'),
            lowStock: document.getElementById('low-stock'),
            recentOrders: document.getElementById('recent-orders'),
            ordersTable: document.getElementById('orders-table'),
            productsGrid: document.getElementById('products-grid'),
            salesChart: document.getElementById('sales-chart'),
            categoriesChart: document.getElementById('categories-chart'),
            statsOrders: document.getElementById('stats-orders'),
            statsRevenue: document.getElementById('stats-revenue'),
            statsProductsSold: document.getElementById('stats-products-sold'),
            statsAvgCart: document.getElementById('stats-avg-cart'),
            salesDetails: document.getElementById('sales-details'),
            adminPasswordInput: document.getElementById('admin-password'),
            deleteCodeInput: document.getElementById('delete-code'),
            saveSecurityBtn: document.getElementById('save-security'),
            activityLog: document.getElementById('activity-log'),
            orderDetailModal: document.getElementById('order-detail-modal'),
            orderDetailContent: document.getElementById('order-detail-content'),
            productModal: document.getElementById('product-modal'),
            deleteConfirmModal: document.getElementById('delete-confirm-modal')
        };

        // Initialisation de l'application
        function initApp() {
            setupEventListeners();
            checkAuthState();
        }

        // Vérification de l'état d'authentification
        function checkAuthState() {
            const savedAuth = localStorage.getItem('adminAuth');
            if (savedAuth) {
                const auth = JSON.parse(savedAuth);
                if (auth.loggedIn && auth.timestamp > Date.now() - 24 * 60 * 60 * 1000) {
                    showApp();
                    loadData();
                } else {
                    showLogin();
                }
            } else {
                showLogin();
            }
        }

        // Configuration des écouteurs d'événements
        function setupEventListeners() {
            // Login
            elements.loginBtn.addEventListener('click', handleLogin);
            elements.loginPassword.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleLogin();
            });

            // Navigation
            elements.menuItems.forEach(item => {
                if (item.id !== 'logout-btn') {
                    item.addEventListener('click', (e) => {
                        const pageId = item.getAttribute('data-page');
                        navigateTo(pageId);
                    });
                }
            });

            // Déconnexion
            document.getElementById('logout-btn').addEventListener('click', handleLogout);

            // Sécurité
            elements.saveSecurityBtn.addEventListener('click', saveSecuritySettings);

            // Modales
            document.querySelectorAll('.modal-close').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.modal-overlay').forEach(modal => {
                        modal.style.display = 'none';
                    });
                });
            });

            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.style.display = 'none';
                    }
                });
            });

            // Commandes
            document.getElementById('order-status-filter').addEventListener('change', filterOrders);
            document.getElementById('order-search').addEventListener('input', filterOrders);

            // Produits
            document.getElementById('add-product-btn').addEventListener('click', showAddProductModal);
            document.getElementById('save-product-btn').addEventListener('click', saveProduct);
            document.getElementById('cancel-product-btn').addEventListener('click', () => {
                elements.productModal.style.display = 'none';
            });

            document.getElementById('product-category-filter').addEventListener('change', filterProducts);
            document.getElementById('product-stock-filter').addEventListener('change', filterProducts);
            document.getElementById('product-search').addEventListener('input', filterProducts);
        }

        // Gestion de la connexion
        function handleLogin() {
            const password = elements.loginPassword.value;
            
            if (password === adminPassword) {
                // Enregistrer l'authentification
                localStorage.setItem('adminAuth', JSON.stringify({
                    loggedIn: true,
                    timestamp: Date.now()
                }));
                
                showApp();
                loadData();
                elements.loginError.style.display = 'none';
            } else {
                elements.loginError.style.display = 'block';
            }
        }

        // Gestion de la déconnexion
        function handleLogout() {
            localStorage.removeItem('adminAuth');
            showLogin();
        }

        // Afficher l'application
        function showApp() {
            elements.loginPage.style.display = 'none';
            elements.appContainer.classList.remove('hidden');
        }

        // Afficher l'écran de connexion
        function showLogin() {
            elements.loginPage.style.display = 'flex';
            elements.appContainer.classList.add('hidden');
            elements.loginPassword.value = '';
        }

        // Navigation entre les pages
        function navigateTo(pageId) {
            // Mettre à jour le titre de la page
            elements.pageTitle.textContent = getPageTitle(pageId);
            
            // Masquer toutes les pages
            elements.pages.forEach(page => {
                page.classList.remove('active');
            });
            
            // Afficher la page demandée
            document.getElementById(`${pageId}-page`).classList.add('active');
            
            // Mettre à jour la navigation
            elements.menuItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-page') === pageId) {
                    item.classList.add('active');
                }
            });
            
            // Charger les données spécifiques à la page
            if (pageId === 'dashboard') {
                loadDashboard();
            } else if (pageId === 'orders') {
                loadOrders();
            } else if (pageId === 'products') {
                loadProducts();
            } else if (pageId === 'stats') {
                loadStats();
            } else if (pageId === 'security') {
                loadSecurity();
            }
        }

        // Obtenir le titre de la page
        function getPageTitle(pageId) {
            const titles = {
                'dashboard': 'Tableau de bord',
                'orders': 'Gestion des commandes',
                'products': 'Gestion des produits',
                'stats': 'Statistiques de vente',
                'security': 'Paramètres de sécurité'
            };
            return titles[pageId] || 'Tableau de bord';
        }

        // Chargement des données
        async function loadData() {
            try {
                // Charger les paramètres de sécurité
                const securityDoc = await db.collection('admin').doc('security').get();
                if (securityDoc.exists) {
                    const securityData = securityDoc.data();
                    adminPassword = securityData.password || '0000';
                    deleteCode = securityData.deleteCode || '0000';
                } else {
                    // Créer les paramètres par défaut
                    await db.collection('admin').doc('security').set({
                        password: '0000',
                        deleteCode: '0000'
                    });
                }
                
                // Charger les commandes
                const ordersSnapshot = await db.collection('orders').orderBy('date', 'desc').get();
                orders = ordersSnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                
                // Charger les produits
                const productsSnapshot = await db.collection('products').get();
                products = productsSnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                
                // Charger les notifications
                const notificationsSnapshot = await db.collection('notifications')
                    .where('read', '==', false)
                    .get();
                
                notifications = notificationsSnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                
                // Mettre à jour l'interface
                updateNotifications();
                loadDashboard();
                
            } catch (error) {
                console.error('Erreur de chargement des données:', error);
            }
        }

        // Mettre à jour les notifications
        function updateNotifications() {
            elements.notificationCount.textContent = notifications.length;
        }

        // Chargement du tableau de bord
        function loadDashboard() {
            // Calculer les statistiques
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const todayOrdersCount = orders.filter(order => {
                const orderDate = order.date.toDate();
                return orderDate >= today && order.status === 'completed';
            }).length;
            
            const todayRevenue = orders.filter(order => {
                const orderDate = order.date.toDate();
                return orderDate >= today && order.status === 'completed';
            }).reduce((total, order) => total + order.total, 0);
            
            const pendingOrdersCount = orders.filter(order => order.status === 'pending').length;
            
            const lowStockCount = products.filter(product => product.stock < 5).length;
            
            // Mettre à jour les cartes
            elements.todayOrders.textContent = todayOrdersCount;
            elements.todayRevenue.textContent = `${todayRevenue.toLocaleString()} FCFA`;
            elements.pendingOrders.textContent = pendingOrdersCount;
            elements.lowStock.textContent = lowStockCount;
            
            // Mettre à jour les graphiques
            updateCharts();
            
            // Mettre à jour les commandes récentes
            updateRecentOrders();
        }

        // Mettre à jour les graphiques
        function updateCharts() {
            // Données factices pour la démonstration
            const salesData = {
                labels: ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'],
                datasets: [{
                    label: 'Ventes (FCFA)',
                    data: [120000, 190000, 150000, 210000, 180000, 250000, 220000],
                    backgroundColor: 'rgba(20, 40, 160, 0.2)',
                    borderColor: 'rgba(20, 40, 160, 1)',
                    borderWidth: 2,
                    tension: 0.4
                }]
            };
            
            const categoriesData = {
                labels: ['iPhone', 'Samsung', 'Tecno', 'Écouteurs', 'Chargeurs'],
                datasets: [{
                    data: [35, 25, 15, 12, 13],
                    backgroundColor: [
                        'rgba(20, 40, 160, 0.7)',
                        'rgba(255, 107, 0, 0.7)',
                        'rgba(0, 102, 255, 0.7)',
                        'rgba(58, 58, 58, 0.7)',
                        'rgba(255, 102, 0, 0.7)'
                    ]
                }]
            };
            
            // Créer ou mettre à jour le graphique des ventes
            if (window.salesChart) {
                window.salesChart.destroy();
            }
            
            const salesCtx = elements.salesChart.getContext('2d');
            window.salesChart = new Chart(salesCtx, {
                type: 'line',
                data: salesData,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString() + ' FCFA';
                                }
                            }
                        }
                    }
                }
            });
            
            // Créer ou mettre à jour le graphique des catégories
            if (window.categoriesChart) {
                window.categoriesChart.destroy();
            }
            
            const categoriesCtx = elements.categoriesChart.getContext('2d');
            window.categoriesChart = new Chart(categoriesCtx, {
                type: 'doughnut',
                data: categoriesData,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        }
                    }
                }
            });
        }

        // Mettre à jour les commandes récentes
        function updateRecentOrders() {
            const recentOrders = orders.slice(0, 5);
            
            if (recentOrders.length === 0) {
                elements.recentOrders.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center">Aucune commande récente</td>
                    </tr>
                `;
                return;
            }
            
            elements.recentOrders.innerHTML = '';
            recentOrders.forEach(order => {
                const orderDate = order.date.toDate();
                const formattedDate = orderDate.toLocaleDateString('fr-FR');
                
                let statusClass = '';
                if (order.status === 'completed') statusClass = 'text-success';
                else if (order.status === 'rejected') statusClass = 'text-danger';
                else statusClass = 'text-warning';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${order.id.substring(0, 8)}</td>
                    <td>${order.customerName}</td>
                    <td>${formattedDate}</td>
                    <td>${order.total.toLocaleString()} FCFA</td>
                    <td class="${statusClass}">${getStatusText(order.status)}</td>
                    <td>
                        <button class="btn btn-sm btn-primary view-order-btn" data-id="${order.id}">Voir</button>
                    </td>
                `;
                
                elements.recentOrders.appendChild(tr);
            });
            
            // Ajouter les écouteurs d'événements pour les boutons "Voir"
            document.querySelectorAll('.view-order-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const orderId = btn.getAttribute('data-id');
                    showOrderDetails(orderId);
                });
            });
        }

        // Obtenir le texte du statut
        function getStatusText(status) {
            const statuses = {
                'pending': 'En attente',
                'completed': 'Validée',
                'rejected': 'Rejetée'
            };
            return statuses[status] || status;
        }

        // Afficher les détails d'une commande
        function showOrderDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            const orderDate = order.date.toDate();
            const formattedDate = orderDate.toLocaleDateString('fr-FR');
            
            let itemsHtml = '';
            order.items.forEach(item => {
                itemsHtml += `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid #eee;">
                        <div>
                            <div style="font-weight: 500;">${item.product.name}</div>
                            <div style="font-size: 0.9rem; color: #666;">${item.quantity} x ${item.product.salePrice || item.product.normalPrice} FCFA</div>
                        </div>
                        <div style="font-weight: 500;">${(item.quantity * (item.product.salePrice || item.product.normalPrice)).toLocaleString()} FCFA</div>
                    </div>
                `;
            });
            
            elements.orderDetailContent.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                        <div>
                            <div style="font-weight: 500;">N° de commande</div>
                            <div>${order.id}</div>
                        </div>
                        <div>
                            <div style="font-weight: 500;">Date</div>
                            <div>${formattedDate}</div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="font-weight: 500;">Client</div>
                        <div>${order.customerName}</div>
                        <div>${order.customerPhone}</div>
                        ${order.customerEmail ? `<div>${order.customerEmail}</div>` : ''}
                        ${order.customerAddress ? `<div>${order.customerAddress}</div>` : ''}
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="font-weight: 500;">Articles</div>
                        ${itemsHtml}
                    </div>
                    
                    <div style="border-top: 2px solid #eee; padding-top: 15px;">
                        <div style="display: flex; justify-content: space-between; font-weight: 500;">
                            <div>Total</div>
                            <div>${order.total.toLocaleString()} FCFA</div>
                        </div>
                    </div>
                </div>
            `;
            
            elements.orderDetailModal.style.display = 'flex';
            
            // Configurer les boutons d'action
            document.getElementById('validate-order-btn').onclick = () => updateOrderStatus(orderId, 'completed');
            document.getElementById('reject-order-btn').onclick = () => updateOrderStatus(orderId, 'rejected');
            document.getElementById('close-order-btn').onclick = () => {
                elements.orderDetailModal.style.display = 'none';
            };
            
            // Masquer les boutons si la commande n'est pas en attente
            if (order.status !== 'pending') {
                document.getElementById('validate-order-btn').style.display = 'none';
                document.getElementById('reject-order-btn').style.display = 'none';
            } else {
                document.getElementById('validate-order-btn').style.display = 'inline-block';
                document.getElementById('reject-order-btn').style.display = 'inline-block';
            }
        }

        // Mettre à jour le statut d'une commande
        async function updateOrderStatus(orderId, status) {
            try {
                await db.collection('orders').doc(orderId).update({
                    status: status
                });
                
                // Mettre à jour localement
                const orderIndex = orders.findIndex(o => o.id === orderId);
                if (orderIndex !== -1) {
                    orders[orderIndex].status = status;
                }
                
                // Recharger les données
                loadDashboard();
                if (document.getElementById('orders-page').classList.contains('active')) {
                    loadOrders();
                }
                
                // Ferme  la modal
                elements.orderDetailModal.style.display = 'none';
                
                showNotification(`Commande ${status === 'completed' ? 'validée' : 'rejetée'} avec succès`, 'success');
                
            } catch (error) {
                console.error('Erreur lors de la mise à jour du statut:', error);
                showNotification('Erreur lors de la mise à jour du statut', 'error');
            }
        }

        // Chargement des commandes
        function loadOrders() {
            filterOrders();
        }

        // Filtrage des commandes
        function filterOrders() {
            const statusFilter = document.getElementById('order-status-filter').value;
            const searchText = document.getElementById('order-search').value.toLowerCase();
            
            let filteredOrders = orders;
            
            // Filtrer par statut
            if (statusFilter !== 'all') {
                filteredOrders = filteredOrders.filter(order => order.status === statusFilter);
            }
            
            // Filtrer par recherche
            if (searchText) {
                filteredOrders = filteredOrders.filter(order => 
                    order.id.toLowerCase().includes(searchText) ||
                    order.customerName.toLowerCase().includes(searchText) ||
                    order.customerPhone.toLowerCase().includes(searchText)
                );
            }
            
            // Afficher les commandes filtrées
            displayOrders(filteredOrders);
        }

        // Affichage des commandes
        function displayOrders(ordersToDisplay) {
            if (ordersToDisplay.length === 0) {
                elements.ordersTable.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center">Aucune commande trouvée</td>
                    </tr>
                `;
                return;
            }
            
            elements.ordersTable.innerHTML = '';
            ordersToDisplay.forEach(order => {
                const orderDate = order.date.toDate();
                const formattedDate = orderDate.toLocaleDateString('fr-FR');
                
                let statusClass = '';
                if (order.status === 'completed') statusClass = 'text-success';
                else if (order.status === 'rejected') statusClass = 'text-danger';
                else statusClass = 'text-warning';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${order.id}</td>
                    <td>${order.customerName}</td>
                    <td>${order.customerPhone}</td>
                    <td>${formattedDate}</td>
                    <td>${order.total.toLocaleString()} FCFA</td>
                    <td class="${statusClass}">${getStatusText(order.status)}</td>
                    <td>
                        <button class="btn btn-sm btn-primary view-order-btn" data-id="${order.id}">Voir</button>
                    </td>
                `;
                
                elements.ordersTable.appendChild(tr);
            });
            
            // Ajouter les écouteurs d'événements pour les boutons "Voir"
            document.querySelectorAll('.view-order-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const orderId = btn.getAttribute('data-id');
                    showOrderDetails(orderId);
                });
            });
        }

        // Chargement des produits
        function loadProducts() {
            filterProducts();
        }

        // Filtrage des produits
        function filterProducts() {
            const categoryFilter = document.getElementById('product-category-filter').value;
            const stockFilter = document.getElementById('product-stock-filter').value;
            const searchText = document.getElementById('product-search').value.toLowerCase();
            
            let filteredProducts = products;
            
            // Filtrer par catégorie
            if (categoryFilter !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.category === categoryFilter);
            }
            
            // Filtrer par stock
            if (stockFilter !== 'all') {
                if (stockFilter === 'low') {
                    filteredProducts = filteredProducts.filter(product => product.stock < 5);
                } else if (stockFilter === 'medium') {
                    filteredProducts = filteredProducts.filter(product => product.stock >= 5 && product.stock < 15);
                } else if (stockFilter === 'high') {
                    filteredProducts = filteredProducts.filter(product => product.stock >= 15);
                }
            }
            
            // Filtrer par recherche
            if (searchText) {
                filteredProducts = filteredProducts.filter(product => 
                    product.name.toLowerCase().includes(searchText) ||
                    product.category.toLowerCase().includes(searchText) ||
                    product.description.toLowerCase().includes(searchText)
                );
            }
            
            // Afficher les produits filtrés
            displayProducts(filteredProducts);
        }

        // Affichage des produits
        function displayProducts(productsToDisplay) {
            if (productsToDisplay.length === 0) {
                elements.productsGrid.innerHTML = `
                    <div class="text-center">Aucun produit trouvé</div>
                `;
                return;
            }
            
            elements.productsGrid.innerHTML = '';
            productsToDisplay.forEach(product => {
                let stockClass = 'stock-high';
                let stockText = 'En stock';
                
                if (product.stock < 5) {
                    stockClass = 'stock-low';
                    stockText = 'Stock bas';
                } else if (product.stock < 15) {
                    stockClass = 'stock-medium';
                    stockText = 'Stock moyen';
                }
                
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image">
                        ${product.images && product.images.length > 0 ? 
                            `<img src="${product.images[0]}" alt="${product.name}">` : 
                            `<i class="fas fa-box-open" style="font-size: 3rem; color: #ccc;"></i>`
                        }
                    </div>
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">${(product.salePrice || product.normalPrice).toLocaleString()} FCFA</div>
                        <div class="product-stock">
                            <span>Stock: ${product.stock}</span>
                            <span class="stock-badge ${stockClass}">${stockText}</span>
                        </div>
                    </div>
                `;
                
                elements.productsGrid.appendChild(productCard);
            });
        }

        // Afficher la modal d'ajout de produit
        function showAddProductModal() {
            // Réinitialiser le formulaire
            document.getElementById('product-name').value = '';
            document.getElementById('product-category').value = 'iphone';
            document.getElementById('product-normal-price').value = '';
            document.getElementById('product-sale-price').value = '';
            document.getElementById('product-stock').value = '';
            document.getElementById('product-images').value = '';
            document.getElementById('product-description').value = '';
            
            elements.productModal.style.display = 'flex';
        }

        // Sauvegarder un produit
        async function saveProduct() {
            const name = document.getElementById('product-name').value;
            const category = document.getElementById('product-category').value;
            const normalPrice = parseInt(document.getElementById('product-normal-price').value);
            const salePrice = parseInt(document.getElementById('product-sale-price').value);
            const stock = parseInt(document.getElementById('product-stock').value);
            const images = document.getElementById('product-images').value.split(',').map(url => url.trim());
            const description = document.getElementById('product-description').value;
            
            if (!name || !normalPrice || !stock) {
                showNotification('Veuillez remplir tous les champs obligatoires', 'error');
                return;
            }
            
            try {
                const productData = {
                    name,
                    category,
                    normalPrice,
                    stock,
                    description,
                    dateAdded: new Date()
                };
                
                if (salePrice) productData.salePrice = salePrice;
                if (images.length > 0) productData.images = images;
                
                await db.collection('products').add(productData);
                
                // Recharger les produits
                const productsSnapshot = await db.collection('products').get();
                products = productsSnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                
                // Mettre à jour l'affichage
                filterProducts();
                
                // Fermer la modal
                elements.productModal.style.display = 'none';
                
                showNotification('Produit ajouté avec succès', 'success');
                
            } catch (error) {
                console.error('Erreur lors de l\'ajout du produit:', error);
                showNotification('Erreur lors de l\'ajout du produit', 'error');
            }
        }

        // Chargement des statistiques
        function loadStats() {
            // Données factices pour la démonstration
            elements.statsOrders.textContent = '42';
            elements.statsRevenue.textContent = '1 250 000 FCFA';
            elements.statsProductsSold.textContent = '78';
            elements.statsAvgCart.textContent = '29 762 FCFA';
            
            // Mettre à jour les graphiques des statistiques
            updateStatsCharts();
            
            // Mettre à jour les détails des ventes
            updateSalesDetails();
        }

        // Mettre à jour les graphiques des statistiques
        function updateStatsCharts() {
            // Données factices pour la démonstration
            const statsSalesData = {
                labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin', 'Juil', 'Août', 'Sep', 'Oct', 'Nov', 'Déc'],
                datasets: [{
                    label: 'Ventes (FCFA)',
                    data: [1200000, 1900000, 1500000, 2100000, 1800000, 2500000, 2200000, 2400000, 2300000, 2600000, 2800000, 3000000],
                    backgroundColor: 'rgba(20, 40, 160, 0.2)',
                    borderColor: 'rgba(20, 40, 160, 1)',
                    borderWidth: 2,
                    tension: 0.4
                }]
            };
            
            const statsProductsData = {
                labels: ['iPhone 13', 'Samsung S22', 'AirPods Pro', 'Chargeur USB-C', 'PowerBank'],
                datasets: [{
                    label: 'Quantité vendue',
                    data: [25, 18, 15, 12, 8],
                    backgroundColor: 'rgba(255, 107, 0, 0.7)',
                    borderColor: 'rgba(255, 107, 0, 1)',
                    borderWidth: 1
                }]
            };
            
            // Créer ou mettre à jour le graphique des ventes
            if (window.statsSalesChart) {
                window.statsSalesChart.destroy();
            }
            
            const statsSalesCtx = document.getElementById('stats-sales-chart').getContext('2d');
            window.statsSalesChart = new Chart(statsSalesCtx, {
                type: 'bar',
                data: statsSalesData,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return (value / 1000000).toFixed(1) + ' M';
                                }
                            }
                        }
                    }
                }
            });
            
            // Créer ou mettre à jour le graphique des produits
            if (window.statsProductsChart) {
                window.statsProductsChart.destroy();
            }
            
            const statsProductsCtx = document.getElementById('stats-products-chart').getContext('2d');
            window.statsProductsChart = new Chart(statsProductsCtx, {
                type: 'bar',
                data: statsProductsData,
                options: {
                    responsive: true,
                    indexAxis: 'y',
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        }

        // Mettre à jour les détails des ventes
        function updateSalesDetails() {
            // Données factices pour la démonstration
            const salesDetailsData = [
                { product: 'iPhone 13', quantity: 25, revenue: 1250000, stock: 12 },
                { product: 'Samsung S22', quantity: 18, revenue: 900000, stock: 8 },
                { product: 'AirPods Pro', quantity: 15, revenue: 450000, stock: 5 },
                { product: 'Chargeur USB-C', quantity: 12, revenue: 60000, stock: 20 },
                { product: 'PowerBank', quantity: 8, revenue: 160000, stock: 15 }
            ];
            
            elements.salesDetails.innerHTML = '';
            salesDetailsData.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${item.product}</td>
                    <td>${item.quantity}</td>
                    <td>${item.revenue.toLocaleString()} FCFA</td>
                    <td>${item.stock}</td>
                `;
                elements.salesDetails.appendChild(tr);
            });
        }

        // Chargement des paramètres de sécurité
        function loadSecurity() {
            elements.adminPasswordInput.value = adminPassword;
            elements.deleteCodeInput.value = deleteCode;
            
            // Charger le journal d'activité (factice pour la démonstration)
            elements.activityLog.innerHTML = `
                <tr>
                    <td>01/10/2023 09:15</td>
                    <td>Admin</td>
                    <td>Connexion à l'application</td>
                </tr>
                <tr>
                    <td>01/10/2023 10:30</td>
                    <td>Admin</td>
                    <td>Validation de la commande ST123456</td>
                </tr>
                <tr>
                    <td>01/10/2023 11:45</td>
                    <td>Admin</td>
                    <td>Ajout du produit iPhone 13</td>
                </tr>
            `;
        }

        // Sauvegarder les paramètres de sécurité
        async function saveSecuritySettings() {
            const newPassword = elements.adminPasswordInput.value;
            const newDeleteCode = elements.deleteCodeInput.value;
            
            if (!newPassword || !newDeleteCode) {
                showNotification('Veuillez remplir tous les champs', 'error');
                return;
            }
            
            try {
                await db.collection('admin').doc('security').set({
                    password: newPassword,
                    deleteCode: newDeleteCode
                });
                
                adminPassword = newPassword;
                deleteCode = newDeleteCode;
                
                showNotification('Paramètres de sécurité enregistrés', 'success');
                
            } catch (error) {
                console.error('Erreur lors de la sauvegarde des paramètres:', error);
                showNotification('Erreur lors de la sauvegarde des paramètres', 'error');
            }
        }

        // Afficher une notification
        function showNotification(message, type = 'info') {
            // Créer l'élément de notification
            const notification = document.createElement('div');
            notification.style.position = 'fixed';
            notification.style.bottom = '20px';
            notification.style.right = '20px';
            notification.style.padding = '10px 20px';
            notification.style.borderRadius = '5px';
            notification.style.color = 'white';
            notification.style.zIndex = '3000';
            notification.style.boxShadow = '0 3px 10px rgba(0, 0, 0, 0.2)';
            
            if (type === 'success') {
                notification.style.background = 'var(--success)';
            } else if (type === 'error') {
                notification.style.background = 'var(--danger)';
            } else if (type === 'warning') {
                notification.style.background = 'var(--warning)';
            } else {
                notification.style.background = 'var(--info)';
            }
            
            notification.textContent = message;
            
            // Ajouter à la page
            document.body.appendChild(notification);
            
            // Supprimer après 3 secondes
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 3000);
        }

        // Initialiser l'application
        initApp();
    </script>
</body>
</html>
